import { Component, AfterViewInit } from '@angular/core';
import { ChartPostService } from './chart-post.service';
import { Chart } from 'chart.js';

@Component({
  selector: 'app-chart-post',
  templateUrl: './chart-post.component.html',
  styleUrls: ['./chart-post.component.css']
})
export class ChartPostComponent implements AfterViewInit {
  client$
  title = 'app';
  constructor(private clientService: ChartPostService){}
 
   fetchClient(){
     if(this.client$ == null){ console.log("loading..");}
     this.client$ = this.clientService.fetchClient();
   }

   canvas: any;
  ctx: any;
  myChartSite: any;
  currentChart = "24h";
  data24h = {
    datasets: [
      {
        label: 'Mbps',
        data: [
          {
            "x": "5/30/18 13:08",
            "y": 1.9
          },
          {
            "x": "5/30/18 12:38",
            "y": 2.8
          },
          {
            "x": "5/30/18 12:08",
            "y": 1.2
          },
          {
            "x": "5/30/18 11:38",
            "y": 3.9
          },
          {
            "x": "5/30/18 11:08",
            "y": 2.9
          },
          {
            "x": "5/30/18 10:38",
            "y": 4.6
          },
          {
            "x": "5/30/18 10:08",
            "y": 2.3
          },
          {
            "x": "5/30/18 9:38",
            "y": 2.7
          },
          {
            "x": "5/30/18 9:08",
            "y": 1.1
          },
          {
            "x": "5/30/18 8:38",
            "y": 3.1
          },
          {
            "x": "5/30/18 8:08",
            "y": 2
          },
          {
            "x": "5/30/18 7:38",
            "y": 1.4
          },
          {
            "x": "5/30/18 7:08",
            "y": 5.2
          },
          {
            "x": "5/30/18 6:38",
            "y": 4.8
          },
          {
            "x": "5/30/18 6:08",
            "y": 5.4
          },
          {
            "x": "5/30/18 5:38",
            "y": 1.2
          },
          {
            "x": "5/30/18 5:08",
            "y": 5.5
          },
          {
            "x": "5/30/18 4:38",
            "y": 4.3
          },
          {
            "x": "5/30/18 4:08",
            "y": 3.7
          },
          {
            "x": "5/30/18 3:38",
            "y": 1.6
          },
          {
            "x": "5/30/18 3:08",
            "y": 2.3
          },
          {
            "x": "5/30/18 2:38",
            "y": 2.3
          },
          {
            "x": "5/30/18 2:08",
            "y": 1.7
          },
          {
            "x": "5/30/18 1:38",
            "y": 4.8
          },
          {
            "x": "5/30/18 1:08",
            "y": 2
          },
          {
            "x": "5/30/18 0:38",
            "y": 5.1
          },
          {
            "x": "5/30/18 0:08",
            "y": 1.9
          },
          {
            "x": "5/29/18 23:38",
            "y": 1.5
          },
          {
            "x": "5/29/18 23:08",
            "y": 4.1
          },
          {
            "x": "5/29/18 22:38",
            "y": 2.6
          },
          {
            "x": "5/29/18 22:08",
            "y": 3.7
          },
          {
            "x": "5/29/18 21:38",
            "y": 1.5
          },
          {
            "x": "5/29/18 21:08",
            "y": 1
          },
          {
            "x": "5/29/18 20:38",
            "y": 5.2
          },
          {
            "x": "5/29/18 20:08",
            "y": 2.3
          },
          {
            "x": "5/29/18 19:38",
            "y": 4.8
          },
          {
            "x": "5/29/18 19:08",
            "y": 3.2
          },
          {
            "x": "5/29/18 18:38",
            "y": 4.5
          },
          {
            "x": "5/29/18 18:08",
            "y": 5.5
          },
          {
            "x": "5/29/18 17:38",
            "y": 5.3
          },
          {
            "x": "5/29/18 17:08",
            "y": 1.1
          },
          {
            "x": "5/29/18 16:38",
            "y": 3.4
          },
          {
            "x": "5/29/18 16:08",
            "y": 4.4
          },
          {
            "x": "5/29/18 15:38",
            "y": 1.9
          },
          {
            "x": "5/29/18 15:08",
            "y": 5.5
          },
          {
            "x": "5/29/18 14:38",
            "y": 3.5
          },
          {
            "x": "5/29/18 14:08",
            "y": 5.5
          },
          {
            "x": "5/29/18 13:38",
            "y": 7.5
          },
          {
            "x": "5/29/18 13:08",
            "y": 9.5
          }
        ],
        backgroundColor: [
          'rgb(100, 120, 183, .5)',
        ],
        borderWidth: 1
      }
    ]
  }

  data60m = {
    datasets: [
      {
        label: 'Mbps',
        data: [
          {
            "x": "5/30/18 13:17",
            "y": 4.8
          },
          {
            "x": "5/30/18 13:16",
            "y": 8.3
          },
          {
            "x": "5/30/18 13:15",
            "y": 3.9
          },
          {
            "x": "5/30/18 13:14",
            "y": 3.5
          },
          {
            "x": "5/30/18 13:13",
            "y": 3.6
          },
          {
            "x": "5/30/18 13:12",
            "y": 6.6
          },
          {
            "x": "5/30/18 13:11",
            "y": 4.7
          },
          {
            "x": "5/30/18 13:10",
            "y": 4
          },
          {
            "x": "5/30/18 13:09",
            "y": 7.6
          },
          {
            "x": "5/30/18 13:08",
            "y": 2.2
          },
          {
            "x": "5/30/18 13:07",
            "y": 5.8
          },
          {
            "x": "5/30/18 13:06",
            "y": 3
          },
          {
            "x": "5/30/18 13:05",
            "y": 8.3
          },
          {
            "x": "5/30/18 13:04",
            "y": 5.5
          },
          {
            "x": "5/30/18 13:03",
            "y": 4.7
          },
          {
            "x": "5/30/18 13:02",
            "y": 10.1
          },
          {
            "x": "5/30/18 13:01",
            "y": 7.1
          },
          {
            "x": "5/30/18 13:00",
            "y": 4.5
          },
          {
            "x": "5/30/18 12:59",
            "y": 5.7
          },
          {
            "x": "5/30/18 12:58",
            "y": 2.4
          },
          {
            "x": "5/30/18 12:57",
            "y": 8.8
          },
          {
            "x": "5/30/18 12:56",
            "y": 5.5
          },
          {
            "x": "5/30/18 12:55",
            "y": 10.2
          },
          {
            "x": "5/30/18 12:54",
            "y": 8.5
          },
          {
            "x": "5/30/18 12:53",
            "y": 4.4
          },
          {
            "x": "5/30/18 12:52",
            "y": 4.1
          },
          {
            "x": "5/30/18 12:51",
            "y": 4
          },
          {
            "x": "5/30/18 12:50",
            "y": 7.8
          },
          {
            "x": "5/30/18 12:49",
            "y": 6.6
          },
          {
            "x": "5/30/18 12:48",
            "y": 3.7
          },
          {
            "x": "5/30/18 12:47",
            "y": 4.6
          },
          {
            "x": "5/30/18 12:46",
            "y": 8
          },
          {
            "x": "5/30/18 12:45",
            "y": 6
          },
          {
            "x": "5/30/18 12:44",
            "y": 2.8
          },
          {
            "x": "5/30/18 12:43",
            "y": 8.5
          },
          {
            "x": "5/30/18 12:42",
            "y": 8.3
          },
          {
            "x": "5/30/18 12:41",
            "y": 9.3
          },
          {
            "x": "5/30/18 12:40",
            "y": 7.2
          },
          {
            "x": "5/30/18 12:39",
            "y": 7.6
          },
          {
            "x": "5/30/18 12:38",
            "y": 8.7
          },
          {
            "x": "5/30/18 12:37",
            "y": 3.3
          },
          {
            "x": "5/30/18 12:36",
            "y": 5.8
          },
          {
            "x": "5/30/18 12:35",
            "y": 2.1
          },
          {
            "x": "5/30/18 12:34",
            "y": 7.3
          },
          {
            "x": "5/30/18 12:33",
            "y": 6.8
          },
          {
            "x": "5/30/18 12:32",
            "y": 10
          },
          {
            "x": "5/30/18 12:31",
            "y": 7.2
          },
          {
            "x": "5/30/18 12:30",
            "y": 9.2
          },
          {
            "x": "5/30/18 12:29",
            "y": 8.3
          },
          {
            "x": "5/30/18 12:28",
            "y": 4.4
          },
          {
            "x": "5/30/18 12:27",
            "y": 6.5
          },
          {
            "x": "5/30/18 12:26",
            "y": 9.3
          },
          {
            "x": "5/30/18 12:25",
            "y": 3.6
          },
          {
            "x": "5/30/18 12:24",
            "y": 5
          },
          {
            "x": "5/30/18 12:23",
            "y": 5.9
          },
          {
            "x": "5/30/18 12:22",
            "y": 3.3
          },
          {
            "x": "5/30/18 12:21",
            "y": 10.4
          },
          {
            "x": "5/30/18 12:20",
            "y": 9.6
          },
          {
            "x": "5/30/18 12:19",
            "y": 10.1
          },
          {
            "x": "5/30/18 12:18",
            "y": 2.3
          },
          {
            "x": "5/30/18 12:17",
            "y": 9.5
          }
        ],
        backgroundColor: [
          'rgb(100, 120, 183, .5)',
        ],
        borderWidth: 1
      }
    ]
  }

  data7d = {
    datasets: [
      {
        label: 'Mbps',
        data: [
          {
            "x": "5/30/18 13:15",
            "y": 9.4
          },
          {
            "x": "5/30/18 11:15",
            "y": 5.5
          },
          {
            "x": "5/30/18 9:15",
            "y": 3.6
          },
          {
            "x": "5/30/18 7:15",
            "y": 3.1
          },
          {
            "x": "5/30/18 5:15",
            "y": 3.7
          },
          {
            "x": "5/30/18 3:15",
            "y": 7.3
          },
          {
            "x": "5/30/18 1:15",
            "y": 3.5
          },
          {
            "x": "5/29/18 23:15",
            "y": 3.6
          },
          {
            "x": "5/29/18 21:15",
            "y": 5.6
          },
          {
            "x": "5/29/18 19:15",
            "y": 5
          },
          {
            "x": "5/29/18 17:15",
            "y": 7.2
          },
          {
            "x": "5/29/18 15:15",
            "y": 9.3
          },
          {
            "x": "5/29/18 13:15",
            "y": 6.2
          },
          {
            "x": "5/29/18 11:15",
            "y": 7.5
          },
          {
            "x": "5/29/18 9:15",
            "y": 7.3
          },
          {
            "x": "5/29/18 7:15",
            "y": 7.3
          },
          {
            "x": "5/29/18 5:15",
            "y": 2.6
          },
          {
            "x": "5/29/18 3:15",
            "y": 2.9
          },
          {
            "x": "5/29/18 1:15",
            "y": 8.4
          },
          {
            "x": "5/28/18 23:15",
            "y": 6.4
          },
          {
            "x": "5/28/18 21:15",
            "y": 7.3
          },
          {
            "x": "5/28/18 19:15",
            "y": 2.1
          },
          {
            "x": "5/28/18 17:15",
            "y": 6.7
          },
          {
            "x": "5/28/18 15:15",
            "y": 8
          },
          {
            "x": "5/28/18 13:15",
            "y": 10
          },
          {
            "x": "5/28/18 11:15",
            "y": 3.7
          },
          {
            "x": "5/28/18 9:15",
            "y": 2.6
          },
          {
            "x": "5/28/18 7:15",
            "y": 9
          },
          {
            "x": "5/28/18 5:15",
            "y": 9.3
          },
          {
            "x": "5/28/18 3:15",
            "y": 9.1
          },
          {
            "x": "5/28/18 1:15",
            "y": 2.2
          },
          {
            "x": "5/27/18 23:15",
            "y": 6
          },
          {
            "x": "5/27/18 21:15",
            "y": 9.9
          },
          {
            "x": "5/27/18 19:15",
            "y": 4.3
          },
          {
            "x": "5/27/18 17:15",
            "y": 3.6
          },
          {
            "x": "5/27/18 15:15",
            "y": 2.7
          },
          {
            "x": "5/27/18 13:15",
            "y": 3.1
          },
          {
            "x": "5/27/18 11:15",
            "y": 4
          },
          {
            "x": "5/27/18 9:15",
            "y": 8.9
          },
          {
            "x": "5/27/18 7:15",
            "y": 2.7
          },
          {
            "x": "5/27/18 5:15",
            "y": 6.7
          },
          {
            "x": "5/27/18 3:15",
            "y": 6.2
          },
          {
            "x": "5/27/18 1:15",
            "y": 6
          },
          {
            "x": "5/26/18 23:15",
            "y": 2.8
          },
          {
            "x": "5/26/18 21:15",
            "y": 7.1
          },
          {
            "x": "5/26/18 19:15",
            "y": 10.3
          },
          {
            "x": "5/26/18 17:15",
            "y": 9.6
          },
          {
            "x": "5/26/18 15:15",
            "y": 9.3
          },
          {
            "x": "5/26/18 13:15",
            "y": 6.8
          },
          {
            "x": "5/26/18 11:15",
            "y": 8.2
          },
          {
            "x": "5/26/18 9:15",
            "y": 7.5
          },
          {
            "x": "5/26/18 7:15",
            "y": 7.9
          },
          {
            "x": "5/26/18 5:15",
            "y": 10.3
          },
          {
            "x": "5/26/18 3:15",
            "y": 9.2
          },
          {
            "x": "5/26/18 1:15",
            "y": 7.6
          },
          {
            "x": "5/25/18 23:15",
            "y": 10.2
          },
          {
            "x": "5/25/18 21:15",
            "y": 9.8
          },
          {
            "x": "5/25/18 19:15",
            "y": 2.7
          },
          {
            "x": "5/25/18 17:15",
            "y": 3
          },
          {
            "x": "5/25/18 15:15",
            "y": 5
          },
          {
            "x": "5/25/18 13:15",
            "y": 7.8
          },
          {
            "x": "5/25/18 11:15",
            "y": 10.5
          },
          {
            "x": "5/25/18 9:15",
            "y": 8.4
          },
          {
            "x": "5/25/18 7:15",
            "y": 3.7
          },
          {
            "x": "5/25/18 5:15",
            "y": 7
          },
          {
            "x": "5/25/18 3:15",
            "y": 2.3
          },
          {
            "x": "5/25/18 1:15",
            "y": 3.7
          },
          {
            "x": "5/24/18 23:15",
            "y": 8.2
          },
          {
            "x": "5/24/18 21:15",
            "y": 5.2
          },
          {
            "x": "5/24/18 19:15",
            "y": 5.2
          },
          {
            "x": "5/24/18 17:15",
            "y": 10
          },
          {
            "x": "5/24/18 15:15",
            "y": 7.4
          },
          {
            "x": "5/24/18 13:15",
            "y": 4.3
          },
          {
            "x": "5/24/18 11:15",
            "y": 6.7
          },
          {
            "x": "5/24/18 9:15",
            "y": 10.3
          },
          {
            "x": "5/24/18 7:15",
            "y": 2.1
          },
          {
            "x": "5/24/18 5:15",
            "y": 2.1
          },
          {
            "x": "5/24/18 3:15",
            "y": 5.3
          },
          {
            "x": "5/24/18 1:15",
            "y": 9.1
          },
          {
            "x": "5/23/18 23:15",
            "y": 5.5
          },
          {
            "x": "5/23/18 21:15",
            "y": 5.7
          },
          {
            "x": "5/23/18 19:15",
            "y": 2.5
          },
          {
            "x": "5/23/18 17:15",
            "y": 9.3
          },
          {
            "x": "5/23/18 15:15",
            "y": 9.1
          },
          {
            "x": "5/23/18 13:15",
            "y": 6.8
          },
          {
            "x": "5/23/18 11:15",
            "y": 6
          },
          {
            "x": "5/23/18 9:15",
            "y": 6
          },
          {
            "x": "5/23/18 7:15",
            "y": 4.3
          },
          {
            "x": "5/23/18 5:15",
            "y": 5.2
          },
          {
            "x": "5/23/18 3:15",
            "y": 4.4
          }
        ],
        backgroundColor: [
          'rgb(100, 120, 183, .5)',
        ],
        borderWidth: 1
      }
    ]
  }

  ngAfterViewInit() {
    this.canvas = document.getElementById('myChartSite');
    this.ctx = this.canvas.getContext('2d');
    this.myChartSite = new Chart(this.ctx, {
      type: 'line',
      // data: this.data24h,
      options: {
        responsive: true,
        display: true,
        fontSize: '6px',
        padding: '0px',
        maintainAspectRatio: false,
      }
    });
    this.currentChart = "60m";
    this.loadChart();
  }

  loadChart() {
    this.myChartSite.reset();
    this.myChartSite.data.datasets = {};
    switch (this.currentChart) {
      case "24h":
        this.myChartSite.data.datasets = this.data24h.datasets;
        this.myChartSite.options.scales = {
          xAxes: [{
            type: "time",
            display: true,
            scaleLabel: {
              display: true,
              labelString: 'Time'
            }
          }]
        };
        break;
      case "60m":
        this.myChartSite.data.datasets = this.data60m.datasets;
        this.myChartSite.options.scales = {
          xAxes: [{
            type: "time",
            display: true,
            scaleLabel: {
              display: true,
              labelString: 'Time'
            }
          }]
        };
        break;
        case "7d":
        this.myChartSite.data.datasets = this.data7d.datasets;
        this.myChartSite.options.scales = {
          xAxes: [{
            type: "time",
            display: true,
            scaleLabel: {
              display: true,
              labelString: 'Date'
            }
          }]
        };
        break;
    }
    this.myChartSite.update({duration: 1000});

  }

  set60m() {
    this.currentChart = "60m";
    this.loadChart();
  }
  set24h() {
    this.currentChart = "24h";
    this.loadChart();
  }
  set7d() {
    this.currentChart = "7d";
    this.loadChart();
  }

}